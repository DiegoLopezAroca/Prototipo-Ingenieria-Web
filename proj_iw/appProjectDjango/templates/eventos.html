{% load static i18n %}
{% load permisos_extras %}
<!DOCTYPE html>
{% get_current_language as LANGUAGE_CODE %}
<html lang="{{ LANGUAGE_CODE }}">
    <head>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <link rel="icon" href="{% static 'img/iconos/dios.png' %}">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% trans "Peña El Revoque – Eventos" %}</title>
    <meta name="description" content="{% trans "Peña El Revoque — grupo festivo y cultural de Hervías, organizadores del Hervías Rock y de actividades llenas de música, amistad y tradición durante todo el año. ¡Vive el espíritu de El Revoque!" %}">
  </head>
  <body>

    <!-- CABECERA (logo + nav) -->
    <header class="site-header">
      <div class="wrap">
        <a class="brand" href="{% url 'index' %}">
          <img src="{% static 'img/iconos/peña.jpg' %}" alt="{% trans "Logo de la Peña El Revoque" %}" class="brand-logo">
          <span>{% trans "Peña El Revoque" %}</span>
        </a>
        <nav class="main-nav" aria-label="{% trans "Principal" %}">
          <a href="{% url 'index' %}">{% trans "Inicio" %}</a>
          <a href="{% url 'eventos' %}">{% trans "Eventos" %}</a>
          <a href="{% url 'socios' %}">{% trans "Socios" %}</a>
          <a href="{% url 'merchandising' %}">{% trans "Merchandising" %}</a>
          <a href="{% url 'cuotas' %}">{% trans "Cuotas" %}</a>
          <a href="{% url 'registros' %}">{% trans "Registro" %}</a>
        </nav>
        <div class="language-switcher">
          <form action="{% url 'set_language' %}" method="post" style="display: flex; gap: 0.3rem;">
            {% csrf_token %}
            <input type="hidden" name="next" value="{{ request.get_full_path }}">
            <button type="submit" name="language" value="es" class="{% if LANGUAGE_CODE == 'es' %}active-lang{% endif %}">ES</button>
            <button type="submit" name="language" value="en" class="{% if LANGUAGE_CODE == 'en' %}active-lang{% endif %}">EN</button>
            <button type="submit" name="language" value="eu" class="{% if LANGUAGE_CODE == 'eu' %}active-lang{% endif %}">EU</button>
          </form>
        </div>
      </div>
    </header>

    <!-- Imagen de fondo con hero -->
    <section class="hero">
      <div class="hero-inner">
        <img src="{% static 'img/iconos/peña.jpg' %}" alt="{% trans "Escudo de la Peña" %}" class="logo-hero">
        <h1>{% trans "Eventos Hervías – Peña El Revoque" %}</h1>
        <p>{% trans "Fiesta, tradición y comunidad en La Rioja" %}</p>
        <a class="btn" href="#indice">{% trans "Ver índice" %}</a>
      </div>
    </section>

    <!-- CUERPO -->
    <main class="wrap">
        <h2>{% trans "Eventos" %}</h2>

        <!-- Índice interno navegable -->
        <nav id="indice" class="indice" aria-label="{% trans "Índice de secciones" %}">
            <h2>{% trans "Índice" %}</h2>
            <ul>
            <li><a href="#fiestashervias-1">{% trans "Fiestas de Hervías" %}</a></li>
            <li><a href="#fiestashervias-2">{% trans "Fiestas de Barrio Cierzo" %}</a></li>
            <li><a href="#fiestashervias-3">{% trans "Día de la Laguna" %}</a></li>
            <li><a href="#fiestashervias-4">{% trans "Fiesta de la Primavera" %}</a></li>
            <li><a href="#fiestashervias-5">{% trans "Romería a Valvanera" %}</a></li>
            </ul>
        </nav>

      <!-- Eventos dinámicos -->
       {% for evento in eventos %}
      <section id="fiestashervias-{{ evento.id }}" class="two-col section-alt">
        <div class="col-text">
          <h2>{{ evento.nombre }}</h2>
            <p>
              {{ evento.descripcion|linebreaksbr }}
            </p>
            <p>
              <b>{% trans "Fecha y lugar:" %}</b> {% blocktrans with lugar=evento.lugar fecha=evento.fecha %}En {{ lugar }} el día {{ fecha|date:"d/m/Y" }}.{% endblocktrans %}
            </p>
            <p class="center-btn">
              <a href="{% url 'asistencia' evento.id %}" class="btn">{% trans "Registra tu asistencia aquí" %}</a>
              <br><br>
              {% if user|es_moderador_o_gestor %}
                <a href="{% url 'lista_asistentes' evento.id %}" class="btn">{% trans "Lista de personas que asistirán" %}</a>
              {% endif %}
            </p>
        </div>
        <div class="col-img">
          <img src="{% static 'img/eventos/' %}{{ evento.imagen }}" alt="{% trans "Fiesta de Hervías" %}">
        </div>
      </section>
      {% endfor %}
    </main>

    <!-- PIE -->
    <footer class="site-footer">
      <p>&copy; 2025 {% trans "Peña El Revoque. Todos los derechos reservados." %}</p>
      <p>{% trans "Síguenos en:" %}
        <a href="https://www.instagram.com/hervias_larioja" target="_blank">Instagram</a> |
        <a href="https://www.facebook.com/elrevoquehervias" target="_blank">Facebook</a>
      </p>
      <p><a href="{% url 'contacto' %}">{% trans "Contacta con nosotros aquí" %}</a></p>
    </footer>

  </body>
</html>
